function Matrix(t,i){this.canvas=t,this.ctx=t.getContext("2d"),this.interval=null,this.options=_.extend({fontSize:10,fps:15,fontColor:"darkgreen",excludeRegex:null},i),this.updateCanvasSize()}Matrix.prototype.start=function(){this.onTick(),this.interval=setInterval(this.onTick.bind(this),1e3/this.options.fps)},Matrix.prototype.stop=function(){this.interval&&(clearInterval(this.interval),this.interval=null)},Matrix.prototype.onTick=function(){this.clear(),this.drawLines()},Matrix.prototype.drawLines=function(){for(var t,i=0;i<this.maxLines;i++)t=Matrix.getNumberString(this.maxColumns),this.options.excludeRegex&&(t=t.replace(this.options.excludeRegex," ")),this.writeLine(t,i)},Matrix.prototype.writeLine=function(t,i){this.writeText(t,i*this.options.fontSize+this.options.fontSize)},Matrix.prototype.writeText=function(t,i){this.ctx.strokeStyle=this.options.fontColor,this.ctx.font=this.options.fontSize+"px mono",this.ctx.strokeText(t,0,i)},Matrix.prototype.updateCanvasSize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.maxLines=this.canvas.height/this.options.fontSize,this.maxColumns=this.canvas.width/this.options.fontSize*2},Matrix.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},Matrix.getNumberString=function(t){for(var i="";i.length<t;)i+=Matrix.getRandom();return i.substring(0,t)},Matrix.getRandom=function(){var t=/\d{2,}/g;return t.exec(Math.random())};
